<!--pages/home/showMy/showMy.wxml-->

<view wx:if="{{loading}}" class='loading'>
    <van-loading color="#fff" size="80rpx" custom-class='loading-spin'/>
</view>

<view wx:if="{{orders !== '' && orders.length === 0}}" class='no-order'>
    你还没有订单呢
  </view>
  <block wx:for="{{orders}}" wx:key="{{order.id}}" wx:for-item="order">
    <van-card
      num="{{order.customerNumber}}"
      price="{{order.service_id.price}}"
      desc="{{order.service_id.startTime}} - {{order.service_id.lastTime}}"
      title="{{order.service_id.description}}"
      custom-class="card"
      title-class="title"
      desc-class="description"
      num-class="count"
      price-class="price"
    >
      <view slot="footer">
        <van-button
            wx:if="{{kind==='success'}}" 
            id="{{order.id}}" 
            data-count="{{order.repertory_id.count}}" 
            data-repertoryid="{{order.repertory_id.id}}" 
            bind:tap="cancelThis"
            size="small"
            type='danger'
        >
          取消
        </van-button>
        <van-button
            wx:else
            id="{{order.id}}" 
            data-count="{{order.repertory_id.count}}"  
            bind:tap="deleteThis"
            size="small"
        >
          删除
        </van-button>
      </view>
    </van-card>
  </block>